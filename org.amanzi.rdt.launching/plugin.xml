<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>
<plugin>

	<extension
         point="org.rubypeople.rdt.launching.vmInstallTypes">
      <vmInstallType
            class="org.amanzi.rdt.launching.vm.AweJRubyVMType"
            id="org.rubypeople.rdt.launching.AweVMType">
      </vmInstallType>
    </extension>

	<extension point="org.eclipse.debug.ui.launchShortcuts">
		<shortcut label="Ruby Script"
			icon="icons/full/ctool16/run_ruby.gif"
			class="org.amanzi.rdt.internal.launching.launcher.RubyLaunchShortcut"
			modes="run" id="org.amanzi.rdt.launching.RubyShortcut">
			<contextualLaunch>
				<enablement>
					<with variable="selection">
						<count value="1">
						</count>
						<iterate>
							<or>
								<test value="*.rb"
									property="org.eclipse.debug.ui.matchesPattern">
								</test>
								<test value="*.rbx"
									property="org.eclipse.debug.ui.matchesPattern">
								</test>
								<test value="*.rbw"
									property="org.eclipse.debug.ui.matchesPattern">
								</test>
								<and>
               	    				<test property="org.rubypeople.rdt.launching.isContainer"/>
               	     				<test property="org.rubypeople.rdt.launching.hasProjectNature" args="org.rubypeople.rdt.core.rubynature"/>
               	  				</and>
							</or>
						</iterate>
					</with>
				</enablement>
				<contextLabel label="Ruby Script" mode="run">
				</contextLabel>				
			</contextualLaunch>						
		</shortcut>
	</extension>
	
	<extension
         point="org.eclipse.debug.core.launchConfigurationTypes">
    	<launchConfigurationType
            delegate="org.amanzi.rdt.launching.AweLaunchDelegate"
            id="org.amanzi.rdt.launching.LaunchConfigurationTypeRubyApplication"
            migrationDelegate="org.rubypeople.rdt.internal.launching.RubyMigrationDelegate"
            modes="run"
            name="Ruby Script"
            public="true"
            sourceLocatorId="org.rubypeople.rdt.debug.ui.rubySourceLocator">
      	</launchConfigurationType>
    </extension>
   
   	<extension point="org.eclipse.debug.ui.launchConfigurationTypeImages">
		<launchConfigurationTypeImage icon="icons/full/ctool16/run_ruby.gif"
			configTypeID="org.amanzi.rdt.launching.LaunchConfigurationTypeRubyApplication"
			id="org.amanzi.rdt.launcning.LaunchConfigurationTypeImageRubyApplication">
		</launchConfigurationTypeImage>
	</extension>
	
	<extension point="org.eclipse.debug.ui.launchConfigurationTabGroups">
		<launchConfigurationTabGroup
			type="org.amanzi.rdt.launching.LaunchConfigurationTypeRubyApplication"
			class="org.rubypeople.rdt.internal.debug.ui.launcher.RubyApplicationTabGroup"
			id="org.amanzi.rdt.launcning.LaunchConfigurationTabGroupRubyApplication">
		</launchConfigurationTabGroup>
	</extension>
	
	<extension point="org.eclipse.ui.commands">
		<command name="Run Script"
			description="%Run Script"
			categoryId="org.eclipse.debug.ui.category.run"
			id="org.amanzi.rdt.launching.RubyShortcut">
		</command>		
	</extension>
	
	<extension point="org.eclipse.debug.ui.consoleLineTrackers">
		<consoleLineTracker
			class="org.amanzi.rdt.console.AweConsoleTracker"
			processType="ruby"
			id="org.amanzi.rdt.launching.RubyConsoleTracker">
		</consoleLineTracker>
	</extension>

</plugin>